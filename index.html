<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقع ألعاب احترافي</title>
    <style>
        /* --- المتغيرات العامة والأساسيات --- */
        :root {
            --primary-color: #6e8efb;
            --secondary-color: #a777e3;
            --background-color: #f0f2f5;
            --surface-color: #ffffff;
            --text-color: #333;
            --light-text-color: #666;
            --white-color: #fff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --border-radius: 12px;
            --box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --transition-speed: 0.3s;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color var(--transition-speed);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- الترويسة والتذييل --- */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white-color);
            text-align: center;
            padding: 40px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--box-shadow);
        }

        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            color: var(--light-text-color);
            padding: 20px;
            font-size: 0.9rem;
        }

        /* --- شبكة الألعاب وبطاقات الألعاب --- */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .game-card {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }

        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);
        }

        .game-card-header {
            background: var(--primary-color);
            color: var(--white-color);
            padding: 15px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .game-card-body {
            padding: 25px;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .game-card-body p {
            margin-bottom: 20px;
            color: var(--light-text-color);
            font-size: 1rem;
        }

        /* --- الأزرار --- */
        .play-btn, .back-btn, .guess-btn {
            background: var(--primary-color);
            color: var(--white-color);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
            align-self: center;
        }

        .play-btn:hover, .guess-btn:hover {
            background: #5a7de4;
            transform: scale(1.05);
        }

        .back-btn {
            background: var(--light-text-color);
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        .back-btn:hover {
            background: #555;
        }

        /* --- عرض اللعبة --- */
        .game-view {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-top: 30px;
            text-align: center;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }

        #game-title {
            font-size: 2rem;
            color: var(--primary-color);
        }

        #game-status {
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 500;
            min-height: 30px;
        }

        #restart-btn {
            margin-top: 20px;
            background: var(--success-color);
        }
        #restart-btn:hover {
             background: #218838;
        }

        .hidden {
            display: none !important;
        }

        /* --- لعبة الذاكرة --- */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 20px auto;
            perspective: 1000px;
        }

        .memory-card {
            height: 120px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 8px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            position: relative;
        }

        .memory-card.flip {
            transform: rotateY(180deg);
        }
        
        .memory-card.matched {
            cursor: default;
            opacity: 0.5;
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            border-radius: 8px;
        }

        .card-front {
            background: var(--surface-color);
            transform: rotateY(180deg);
        }

        /* --- لعبة X-O --- */
        .xo-game {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 10px;
            justify-content: center;
            margin: 20px auto;
        }

        .xo-cell {
            background: var(--background-color);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color var(--transition-speed);
        }

        .xo-cell:hover {
            background-color: #e0e2e5;
        }
        
        .xo-cell.winner {
            background-color: var(--success-color);
            color: var(--white-color);
        }

        /* --- لعبة تخمين الرقم --- */
        .guess-game {
            max-width: 400px;
            margin: 20px auto;
        }

        .guess-input {
            padding: 12px;
            font-size: 1.5rem;
            width: 120px;
            margin: 10px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: border-color var(--transition-speed);
        }

        .guess-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>موقع ألعاب احترافي</h1>
            <p>استمتع بألعابنا المصغرة المصممة بعناية</p>
        </header>

        <main id="main-content">
            <div class="games-grid" id="games-grid">
                <!-- بطاقة لعبة الذاكرة -->
                <div class="game-card" data-game="memory">
                    <div class="game-card-header">لعبة الذاكرة</div>
                    <div class="game-card-body">
                        <p>اختبر ذاكرتك بمطابقة البطاقات المتشابهة.</p>
                        <button class="play-btn">العب الآن</button>
                    </div>
                </div>

                <!-- بطاقة لعبة X-O -->
                <div class="game-card" data-game="xo">
                    <div class="game-card-header">لعبة X-O</div>
                    <div class="game-card-body">
                        <p>اللعبة الكلاسيكية الشهيرة، تحدَّ صديقك أو الكمبيوتر.</p>
                        <button class="play-btn">العب الآن</button>
                    </div>
                </div>

                <!-- بطاقة لعبة تخمين الرقم -->
                <div class="game-card" data-game="guess">
                    <div class="game-card-header">تخمين الرقم</div>
                    <div class="game-card-body">
                        <p>هل يمكنك تخمين الرقم السري بين 1 و 100؟</p>
                        <button class="play-btn">العب الآن</button>
                    </div>
                </div>
            </div>

            <!-- حاوية اللعبة النشطة -->
            <div id="game-view" class="game-view hidden">
                <div class="game-header">
                    <h2 id="game-title"></h2>
                    <button class="back-btn" aria-label="العودة إلى قائمة الألعاب">← العودة</button>
                </div>
                <div id="game-board-container">
                    <!-- سيتم حقن لوحة اللعبة هنا بواسطة JavaScript -->
                </div>
                <div id="game-status" class="game-status"></div>
                <button id="restart-btn" class="play-btn hidden">إعادة اللعب</button>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 موقع الألعاب الاحترافي. جميع الحقوق محفوظة.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- العناصر الرئيسية ---
            const gamesGrid = document.getElementById('games-grid');
            const gameView = document.getElementById('game-view');
            const gameTitle = document.getElementById('game-title');
            const gameBoardContainer = document.getElementById('game-board-container');
            const gameStatus = document.getElementById('game-status');
            const restartBtn = document.getElementById('restart-btn');
            const backBtn = document.querySelector('.back-btn');

            // --- التنقل بين العروض ---
            const showGameView = (gameId) => {
                gamesGrid.classList.add('hidden');
                gameView.classList.remove('hidden');
                restartBtn.classList.add('hidden');
                gameStatus.textContent = '';
                
                const gameCard = document.querySelector(`.game-card[data-game="${gameId}"]`);
                gameTitle.textContent = gameCard.querySelector('.game-card-header').textContent;

                // تهيئة اللعبة المناسبة
                if (gameModules[gameId]) {
                    gameModules[gameId].init();
                }
            };

            const showGridView = () => {
                gameView.classList.add('hidden');
                gamesGrid.classList.remove('hidden');
            };

            // --- ربط الأحداث ---
            gamesGrid.addEventListener('click', (e) => {
                const gameCard = e.target.closest('.game-card');
                if (gameCard) {
                    showGameView(gameCard.dataset.game);
                }
            });

            backBtn.addEventListener('click', showGridView);
            restartBtn.addEventListener('click', () => {
                const currentGame = gameView.dataset.activeGame;
                if (currentGame && gameModules[currentGame]) {
                    gameModules[currentGame].init();
                }
            });

            // --- وحدات الألعاب (Game Modules) ---
            const gameModules = {
                // ======== لعبة الذاكرة ========
                memory: {
                    emojis: ['🍎', '🍌', '🍒', '🍕', '🏀', '🎸', '🚀', '🌟'],
                    lockBoard: false,
                    firstCard: null,
                    secondCard: null,
                    matches: 0,

                    init() {
                        gameView.dataset.activeGame = 'memory';
                        this.matches = 0;
                        this.lockBoard = false;
                        restartBtn.classList.add('hidden');
                        gameStatus.textContent = 'ابحث عن الأزواج المتطابقة!';
                        
                        const cards = [...this.emojis, ...this.emojis].sort(() => 0.5 - Math.random());
                        
                        const board = document.createElement('div');
                        board.className = 'memory-game';
                        board.innerHTML = cards.map(emoji => `
                            <div class="memory-card" data-emoji="${emoji}">
                                <div class="card-face card-back"></div>
                                <div class="card-face card-front">${emoji}</div>
                            </div>
                        `).join('');
                        
                        gameBoardContainer.innerHTML = '';
                        gameBoardContainer.appendChild(board);
                        
                        board.addEventListener('click', this.handleCardClick.bind(this));
                    },

                    handleCardClick(e) {
                        const clickedCard = e.target.closest('.memory-card');
                        if (this.lockBoard || !clickedCard || clickedCard.classList.contains('flip') || clickedCard.classList.contains('matched')) {
                            return;
                        }

                        clickedCard.classList.add('flip');

                        if (!this.firstCard) {
                            this.firstCard = clickedCard;
                            return;
                        }

                        this.secondCard = clickedCard;
                        this.checkForMatch();
                    },

                    checkForMatch() {
                        const isMatch = this.firstCard.dataset.emoji === this.secondCard.dataset.emoji;
                        isMatch ? this.disableCards() : this.unflipCards();
                    },

                    disableCards() {
                        this.firstCard.classList.add('matched');
                        this.secondCard.classList.add('matched');
                        this.matches++;
                        
                        if (this.matches === this.emojis.length) {
                            gameStatus.textContent = 'رائع! لقد فزت!';
                            restartBtn.classList.remove('hidden');
                        }
                        
                        this.resetBoard();
                    },

                    unflipCards() {
                        this.lockBoard = true;
                        setTimeout(() => {
                            this.firstCard.classList.remove('flip');
                            this.secondCard.classList.remove('flip');
                            this.resetBoard();
                        }, 1200);
                    },

                    resetBoard() {
                        [this.firstCard, this.secondCard, this.lockBoard] = [null, null, false];
                    }
                },

                // ======== لعبة X-O ========
                xo: {
                    currentPlayer: 'X',
                    board: Array(9).fill(null),
                    gameActive: true,
                    
                    init() {
                        gameView.dataset.activeGame = 'xo';
                        this.currentPlayer = 'X';
                        this.board.fill(null);
                        this.gameActive = true;
                        restartBtn.classList.add('hidden');
                        gameStatus.textContent = `دور اللاعب: ${this.currentPlayer}`;

                        const boardEl = document.createElement('div');
                        boardEl.className = 'xo-game';
                        boardEl.innerHTML = Array(9).fill(0).map((_, i) => `<div class="xo-cell" data-index="${i}"></div>`).join('');
                        
                        gameBoardContainer.innerHTML = '';
                        gameBoardContainer.appendChild(boardEl);
                        
                        boardEl.addEventListener('click', this.handleCellClick.bind(this));
                    },

                    handleCellClick(e) {
                        const cell = e.target;
                        if (!cell.classList.contains('xo-cell') || !this.gameActive) return;
                        
                        const index = parseInt(cell.dataset.index);
                        if (this.board[index]) return;

                        this.board[index] = this.currentPlayer;
                        cell.textContent = this.currentPlayer;
                        cell.style.color = this.currentPlayer === 'X' ? 'var(--primary-color)' : 'var(--danger-color)';

                        if (this.checkWin()) {
                            gameStatus.textContent = `اللاعب ${this.currentPlayer} فاز!`;
                            this.gameActive = false;
                            restartBtn.classList.remove('hidden');
                        } else if (this.board.every(c => c)) {
                            gameStatus.textContent = 'انتهت اللعبة بالتعادل!';
                            this.gameActive = false;
                            restartBtn.classList.remove('hidden');
                        } else {
                            this.currentPlayer = this.currentPlayer === 'X' ? 'O' : 'X';
                            gameStatus.textContent = `دور اللاعب: ${this.currentPlayer}`;
                        }
                    },

                    checkWin() {
                        const winPatterns = [
                            [0, 1, 2], [3, 4, 5], [6, 7, 8],
                            [0, 3, 6], [1, 4, 7], [2, 5, 8],
                            [0, 4, 8], [2, 4, 6]
                        ];
                        const winner = winPatterns.find(p => 
                            this.board[p[0]] && this.board[p[0]] === this.board[p[1]] && this.board[p[0]] === this.board[p[2]]
                        );
                        if(winner) {
                            winner.forEach(i => document.querySelector(`.xo-cell[data-index='${i}']`).classList.add('winner'));
                        }
                        return !!winner;
                    }
                },

                // ======== لعبة تخمين الرقم ========
                guess: {
                    secretNumber: 0,
                    attempts: 0,

                    init() {
                        gameView.dataset.activeGame = 'guess';
                        this.secretNumber = Math.floor(Math.random() * 100) + 1;
                        this.attempts = 0;
                        restartBtn.classList.add('hidden');
                        gameStatus.textContent = 'خمّن رقمًا بين 1 و 100.';

                        const gameContent = `
                            <div class="guess-game">
                                <input type="number" min="1" max="100" class="guess-input" id="guess-input" placeholder="?">
                   
